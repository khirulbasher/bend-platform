import { BaseFlexibleCrudViewData, BendStatus, BendStatusText, httpStatus, PageableDataResponse } from 'bend-core';
import { BendBaseComponent } from './bend-base.component';
export class BendAbstractListViewComponent extends BendBaseComponent {
    constructor(crudService, toastService, consoleService, appUtilService, compiler, uiModel, translate, langKeyService) {
        super();
        this.crudService = crudService;
        this.toastService = toastService;
        this.consoleService = consoleService;
        this.appUtilService = appUtilService;
        this.compiler = compiler;
        this.uiModel = uiModel;
        this.translate = translate;
        this.langKeyService = langKeyService;
        this.SUCCESS = 'Active Status Changed Successfully';
        this.FAILED = 'Active Status Change Failed';
        this.pageSize = 2;
        this.pageCount = 0;
        this.load = false;
    }
    ngOnInit() {
        super.prepareTranslate(this.translate, this.langKeyService);
        this.crudData = this.emptyData();
        this.fetchAll();
    }
    fetchAll() {
        this.crudService.fetchAllFlexible({ page: this.pageCount, size: this.pageSize }).subscribe((res) => {
            if (res.status === httpStatus.OK && res.body.status.toString() === BendStatusText.SUCCESS) {
                this.crudData = res.body;
                this.crudData.data.columns.push(this.uiModel.tableStructure.actionColumn.title);
                this.load = true;
            }
            else {
                this.consoleService.error('Crud Data Fetch Problem');
            }
        }, (error) => {
            this.consoleService.error('Error Occurred During Crud Data Fetch', error);
        });
    }
    compile(index, values) {
        return this.compiler.compile(index, values);
    }
    prev() {
        this.pageCount--;
        this.reshape();
        this.fetchAll();
    }
    isFirstPage() {
        return this.pageCount === 0;
    }
    reset() {
        this.pageCount = 0;
        this.fetchAll();
    }
    next() {
        this.pageCount++;
        this.reshape();
        this.fetchAll();
    }
    isLastPage() {
        return this.pageCount === (this.crudData.totalPages - 1);
    }
    onPage(event) {
        console.log(event);
    }
    reshape() {
        if (this.pageCount < 0) {
            this.pageCount = 0;
        }
        else if (this.pageCount > this.crudData.totalPages) {
            this.pageCount = this.crudData.totalPages;
        }
    }
    emptyData() {
        const data = new BaseFlexibleCrudViewData();
        data.columns = [];
        data.indexes = [];
        data.values = [];
        const d = new PageableDataResponse();
        d.totalPages = 0;
        d.totalElements = 0;
        d.status = BendStatus.FAILURE;
        d.data = data;
        d.dataTypes = [];
        return d;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmVuZC1hYnN0cmFjdC1saXN0LXZpZXcuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vYmVuZC1jb3JlLXVpLyIsInNvdXJjZXMiOlsibGliL3ZpZXcvYmVuZC1hYnN0cmFjdC1saXN0LXZpZXcuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLE9BQU8sRUFFTCx3QkFBd0IsRUFDeEIsVUFBVSxFQUNWLGNBQWMsRUFHZCxVQUFVLEVBQ1Ysb0JBQW9CLEVBQ3JCLE1BQU0sV0FBVyxDQUFDO0FBS25CLE9BQU8sRUFBQyxpQkFBaUIsRUFBQyxNQUFNLHVCQUF1QixDQUFDO0FBR3hELE1BQU0sT0FBTyw2QkFBK0UsU0FBUSxpQkFBaUI7SUFTbkgsWUFDVSxXQUFtQyxFQUNuQyxZQUE4QixFQUM5QixjQUE4QixFQUM5QixjQUE4QixFQUM5QixRQUFxQyxFQUN0QyxPQUFvQixFQUNuQixTQUEyQixFQUMzQixjQUE4QjtRQUNwQyxLQUFLLEVBQUUsQ0FBQztRQVJGLGdCQUFXLEdBQVgsV0FBVyxDQUF3QjtRQUNuQyxpQkFBWSxHQUFaLFlBQVksQ0FBa0I7UUFDOUIsbUJBQWMsR0FBZCxjQUFjLENBQWdCO1FBQzlCLG1CQUFjLEdBQWQsY0FBYyxDQUFnQjtRQUM5QixhQUFRLEdBQVIsUUFBUSxDQUE2QjtRQUN0QyxZQUFPLEdBQVAsT0FBTyxDQUFhO1FBQ25CLGNBQVMsR0FBVCxTQUFTLENBQWtCO1FBQzNCLG1CQUFjLEdBQWQsY0FBYyxDQUFnQjtRQWZoQyxZQUFPLEdBQUcsb0NBQW9DLENBQUM7UUFDL0MsV0FBTSxHQUFHLDZCQUE2QixDQUFDO1FBRS9DLGFBQVEsR0FBRyxDQUFDLENBQUM7UUFDYixjQUFTLEdBQUcsQ0FBQyxDQUFDO1FBQ2QsU0FBSSxHQUFHLEtBQUssQ0FBQztJQVdBLENBQUM7SUFFZCxRQUFRO1FBQ04sS0FBSyxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsSUFBSSxDQUFDLGNBQWMsQ0FB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QUFDO1FBQ2pCLE1BQU0sQ0FBQyxHQUFHLElBQUksb0JBQW9CLEVBQTRCLENBQUM7UUFDL0QsQ0FBQyxDQUFDLFVBQVUsR0FBRyxDQUFDLENBQUM7UUFDakIsQ0FBQyxDQUFDLGFBQWEsR0FBRyxDQUFDLENBQUM7UUFDcEIsQ0FBQyxDQUFDLE1BQU0sR0FBRyxVQUFVLENBQUMsT0FBTyxDQUFDO1FBQzlCLENBQUMsQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ2QsQ0FBQyxDQUFDLFNBQVMsR0FBRyxFQUFFLENBQUM7UUFDakIsT0FBTyxDQUFDLENBQUM7SUFDWCxDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge09uSW5pdH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7XHJcbiAgQXBwVXRpbFNlcnZpY2UsIEJhc2VDcnVkRGF0YSwgQmFzZURhdGEsXHJcbiAgQmFzZUZsZXhpYmxlQ3J1ZFZpZXdEYXRhLCBCYXNlU2VydmljZSwgQmVuZEZsZXhpYmxlQ29tcGlsZXJTZXJ2aWNlLFxyXG4gIEJlbmRTdGF0dXMsXHJcbiAgQmVuZFN0YXR1c1RleHQsXHJcbiAgQ29uc29sZVNlcnZpY2UsXHJcbiAgRmxleGlibGVJbmRleCxcclxuICBodHRwU3RhdHVzLFxyXG4gIFBhZ2VhYmxlRGF0YVJlc3BvbnNlLCBTdG9yYWdlU2VydmljZVxyXG59IGZyb20gJ2JlbmQtY29yZSc7XHJcbmltcG9ydCB7SHR0cEVycm9yUmVzcG9uc2UsIEh0dHBSZXNwb25zZX0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xyXG5pbXBvcnQge0JlbmRUb2FzdFNlcnZpY2V9IGZyb20gJy4uL21lc3NhZ2UvYmVuZC10b2FzdC5zZXJ2aWNlJztcclxuaW1wb3J0IHtCZW5kVWlNb2RlbH0gZnJvbSAnLi4vdWktbW9kZWwvYmVuZC11aS1tb2RlbCc7XHJcbmltcG9ydCB7VHJhbnNsYXRlU2VydmljZX0gZnJvbSAnQG5neC10cmFuc2xhdGUvY29yZSc7XHJcbmltcG9ydCB7QmVuZEJhc2VDb21wb25lbnR9IGZyb20gJy4vYmVuZC1iYXNlLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7TGFuZ0tleVNlcnZpY2V9IGZyb20gJy4uL3NlcnZpY2UvbGFuZy1rZXktc2VydmljZSc7XHJcblxyXG5leHBvcnQgY2xhc3MgQmVuZEFic3RyYWN0TGlzdFZpZXdDb21wb25lbnQ8UiBleHRlbmRzIEJhc2VDcnVkRGF0YSwgRG9tYWluIGV4dGVuZHMgQmFzZURhdGE+IGV4dGVuZHMgQmVuZEJhc2VDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xyXG4gIGNydWREYXRhOiBQYWdlYWJsZURhdGFSZXNwb25zZTxCYXNlRmxleGlibGVDcnVkVmlld0RhdGE+O1xyXG4gIHByaXZhdGUgU1VDQ0VTUyA9ICdBY3RpdmUgU3RhdHVzIENoYW5nZWQgU3VjY2Vzc2Z1bGx5JztcclxuICBwcml2YXRlIEZBSUxFRCA9ICdBY3RpdmUgU3RhdHVzIENoYW5nZSBGYWlsZWQnO1xyXG4gIHByaXZhdGUgZG9tYWluTmFtZTogc3RyaW5nO1xyXG4gIHBhZ2VTaXplID0gMjtcclxuICBwYWdlQ291bnQgPSAwO1xyXG4gIGxvYWQgPSBmYWxzZTtcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBwcml2YXRlIGNydWRTZXJ2aWNlOiBCYXNlU2VydmljZTxSLCBEb21haW4+LFxyXG4gICAgcHJpdmF0ZSB0b2FzdFNlcnZpY2U6IEJlbmRUb2FzdFNlcnZpY2UsXHJcbiAgICBwcml2YXRlIGNvbnNvbGVTZXJ2aWNlOiBDb25zb2xlU2VydmljZSxcclxuICAgIHByaXZhdGUgYXBwVXRpbFNlcnZpY2U6IEFwcFV0aWxTZXJ2aWNlLFxyXG4gICAgcHJpdmF0ZSBjb21waWxlcjogQmVuZEZsZXhpYmxlQ29tcGlsZXJTZXJ2aWNlLFxyXG4gICAgcHVibGljIHVpTW9kZWw6IEJlbmRVaU1vZGVsLFxyXG4gICAgcHJpdmF0ZSB0cmFuc2xhdGU6IFRyYW5zbGF0ZVNlcnZpY2UsXHJcbiAgICBwcml2YXRlIGxhbmdLZXlTZXJ2aWNlOiBMYW5nS2V5U2VydmljZVxyXG4gICkgeyBzdXBlcigpOyB9XHJcblxyXG4gIG5nT25Jbml0KCk6IHZvaWQge1xyXG4gICAgc3VwZXIucHJlcGFyZVRyYW5zbGF0ZSh0aGlzLnRyYW5zbGF0ZSwgdGhpcy5sYW5nS2V5U2VydmljZSk7XHJcbiAgICB0aGlzLmNydWREYXRhID0gdGhpcy5lbXB0eURhdGEoKTtcclxuICAgIHRoaXMuZmV0Y2hBbGwoKTtcclxuICB9XHJcblxyXG4gIHByb3RlY3RlZCBmZXRjaEFsbCgpIHtcclxuICAgIHRoaXMuY3J1ZFNlcnZpY2UuZmV0Y2hBbGxGbGV4aWJsZSh7cGFnZTogdGhpcy5wYWdlQ291bnQsIHNpemU6IHRoaXMucGFnZVNpemV9KS5zdWJzY3JpYmUoKHJlczogSHR0cFJlc3BvbnNlPFBhZ2VhYmxlRGF0YVJlc3BvbnNlPEJhc2VGbGV4aWJsZUNydWRWaWV3RGF0YT4+KSA9PiB7XHJcbiAgICAgIGlmIChyZXMuc3RhdHVzID09PSBodHRwU3RhdHVzLk9LICYmIHJlcy5ib2R5LnN0YXR1cy50b1N0cmluZygpID09PSBCZW5kU3RhdHVzVGV4dC5TVUNDRVNTKSB7XHJcbiAgICAgICAgdGhpcy5jcnVkRGF0YSA9IHJlcy5ib2R5O1xyXG4gICAgICAgIHRoaXMuY3J1ZERhdGEuZGF0YS5jb2x1bW5zLnB1c2godGhpcy51aU1vZGVsLnRhYmxlU3RydWN0dXJlLmFjdGlvbkNvbHVtbi50aXRsZSk7XHJcbiAgICAgICAgdGhpcy5sb2FkID0gdHJ1ZTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmNvbnNvbGVTZXJ2aWNlLmVycm9yKCdDcnVkIERhdGEgRmV0Y2ggUHJvYmxlbScpO1xyXG4gICAgICB9XHJcbiAgICB9LCAoZXJyb3I6IEh0dHBFcnJvclJlc3BvbnNlKSA9PiB7XHJcbiAgICAgIHRoaXMuY29uc29sZVNlcnZpY2UuZXJyb3IoJ0Vycm9yIE9jY3VycmVkIER1cmluZyBDcnVkIERhdGEgRmV0Y2gnLCBlcnJvcik7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGNvbXBpbGUoaW5kZXg6IEZsZXhpYmxlSW5kZXgsIHZhbHVlczogYW55W10pOiBhbnkge1xyXG4gICAgcmV0dXJuIHRoaXMuY29tcGlsZXIuY29tcGlsZShpbmRleCwgdmFsdWVzKTtcclxuICB9XHJcblxyXG4gIHByZXYoKSB7XHJcbiAgICB0aGlzLnBhZ2VDb3VudCAtLTtcclxuICAgIHRoaXMucmVzaGFwZSgpO1xyXG4gICAgdGhpcy5mZXRjaEFsbCgpO1xyXG4gIH1cclxuXHJcbiAgaXNGaXJzdFBhZ2UoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5wYWdlQ291bnQgPT09IDA7XHJcbiAgfVxyXG5cclxuICByZXNldCgpIHtcclxuICAgIHRoaXMucGFnZUNvdW50ID0gMDtcclxuICAgIHRoaXMuZmV0Y2hBbGwoKTtcclxuICB9XHJcblxyXG4gIG5leHQoKSB7XHJcbiAgICB0aGlzLnBhZ2VDb3VudCArKztcclxuICAgIHRoaXMucmVzaGFwZSgpO1xyXG4gICAgdGhpcy5mZXRjaEFsbCgpO1xyXG4gIH1cclxuXHJcbiAgaXNMYXN0UGFnZSgpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLnBhZ2VDb3VudCA9PT0gKHRoaXMuY3J1ZERhdGEudG90YWxQYWdlcyAtIDEpO1xyXG4gIH1cclxuXHJcbiAgb25QYWdlKGV2ZW50OiBhbnkpIHtcclxuICAgIGNvbnNvbGUubG9nKGV2ZW50KTtcclxuICB9XHJcblxyXG4gIHByb3RlY3RlZCByZXNoYXBlKCkge1xyXG4gICAgaWYgKHRoaXMucGFnZUNvdW50IDwgMCkge1xyXG4gICAgICB0aGlzLnBhZ2VDb3VudCA9IDA7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMucGFnZUNvdW50ID4gdGhpcy5jcnVkRGF0YS50b3RhbFBhZ2VzKSB7XHJcbiAgICAgIHRoaXMucGFnZUNvdW50ID0gdGhpcy5jcnVkRGF0YS50b3RhbFBhZ2VzO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJvdGVjdGVkIGVtcHR5RGF0YSgpOiBQYWdlYWJsZURhdGFSZXNwb25zZTxCYXNlRmxleGlibGVDcnVkVmlld0RhdGE+IHtcclxuICAgIGNvbnN0IGRhdGEgPSBuZXcgQmFzZUZsZXhpYmxlQ3J1ZFZpZXdEYXRhKCk7XHJcbiAgICBkYXRhLmNvbHVtbnMgPSBbXTtcclxuICAgIGRhdGEuaW5kZXhlcyA9IFtdO1xyXG4gICAgZGF0YS52YWx1ZXMgPSBbXTtcclxuICAgIGNvbnN0IGQgPSBuZXcgUGFnZWFibGVEYXRhUmVzcG9uc2U8QmFzZUZsZXhpYmxlQ3J1ZFZpZXdEYXRhPigpO1xyXG4gICAgZC50b3RhbFBhZ2VzID0gMDtcclxuICAgIGQudG90YWxFbGVtZW50cyA9IDA7XHJcbiAgICBkLnN0YXR1cyA9IEJlbmRTdGF0dXMuRkFJTFVSRTtcclxuICAgIGQuZGF0YSA9IGRhdGE7XHJcbiAgICBkLmRhdGFUeXBlcyA9IFtdO1xyXG4gICAgcmV0dXJuIGQ7XHJcbiAgfVxyXG59XHJcbiJdfQ==